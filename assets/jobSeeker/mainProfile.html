<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" href="../image/jobzlogo.png" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css"
    />
    <style>
      .navbar-img {
        width: 80px;
      }

      .course-list__course-logo,
      .opp-img {
        width: 10rem;
      }

      .footer__logo {
        width: 75%;
      }
    </style>
<<<<<<< HEAD
   
=======
>>>>>>> 256feaff7a03f6c0532c23a721bcf9f987916670
    <title>Profile - JobZ</title>
  </head>

  <body>
    <header>
      <nav class="navbar navbar-expand-md bg-dark navbar-dark">
        <div class="container">
          <a href="#" class="navbar-brand"
            ><img
              class="navbar-img"
              src="../image/jobzlogo.png"
              alt="JobZ logo"
            />
          </a>

          <button
            class="navbar-toggler"
            type="button"
            data-bs-toggle="collapse"
            data-bs-target="#navlinks"
          >
            <span class="navbar-toggler-icon"></span>
          </button>

          <div class="collapse navbar-collapse text-center" id="navlinks">
            <ul class="navbar-nav ms-auto">
              <li class="nav-item">
                <a href="index.html" class="nav-link">Home</a>
              </li>
              <li class="nav-item">
                <a href="Contact-us.html" class="nav-link">Contact Us</a>
              </li>
              <li class="nav-item">
                <a href="About-us.html" class="nav-link">About Us</a>
              </li>
              <li class="nav-item">
                <a href="Login.html" class="nav-link">Log in</a>
              </li>
              <li class="nav-item">
                <a href="Sign-up.html" class="nav-link">Sign Up</a>
              </li>
            </ul>
          </div>
        </div>
      </nav>
    </header>

    <section id="main-header" class="bg-warning text-white">
      <div class="container py-2">
        <div class="row">
          <div class="col">
            <div class="input-group">
              <input
                type="search"
                class="form-control rounded"
                placeholder="Search"
                aria-label="Search"
                id="search"
                aria-describedby="search-addon"
              />
              <button type="button" id="searchbtn" value= "ON" class="btn btn-outline-primary">
                search
              </button>
            </div>
            <div id="searchresults">
              <div id="searchresults2"></div>
            </div>
            <div class="row">
              <div class="col-md-4"></div>
              <div class="col-md-8">
                <h2 class="text-center">List of Applied Jobs</h2>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section id="main" class="pt-2 pb-4">
      <div class="container">
        <div class="row">
          <div class="col-md-4 border border-1">
            <div class="accordion my-2" id="accordionExample">
              <div class="accordion-item">
                <h2 class="accordion-header" id="headingOne">
                  <button
                    class="accordion-button"
                    type="button"
                    data-bs-toggle="collapse"
                    data-bs-target="#collapseOne"
                    aria-expanded="true"
                    aria-controls="collapseOne"
                  >
                    <span class="fw-bold" id="username">Husen Yusuf</span>
                  </button>
                </h2>
                <div
                  id="collapseOne"
                  class="accordion-collapse collapse show"
                  aria-labelledby="headingOne"
                  data-bs-parent="#accordionExample"
                >
                  <div class="accordion-body text-center my-0">
                    <h2 id="username2">Husen Yusuf</h2>
                    <button class="btn btn-warning">Edit Profile</button>
                    <button class="btn btn-warning">Logout</button>
                  </div>
                </div>
              </div>
            </div>

            <h2 class="text-center">Suggested Jobs For You</h2>

            <table class="table table-striped">
              <thead class="thead-dark">
                <tr>
                  <th class="w-60">Job List</th>
                  <th class="w-20">Details</th>
                  <th class="w-20">Status</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>Accountant-Nib Bank</td>
                  <td>
                    <button class="btn btn-warning text-white">
                      see detail
                    </button>
                  </td>
                  <td>
                    <button class="btn btn-warning text-white">Apply</button>
                  </td>
                </tr>
                <tr>
                  <td>Accountant-Nib Bank</td>
                  <td>
                    <button class="btn btn-warning text-white">
                      see detail
                    </button>
                  </td>
                  <td>
                    <button class="btn btn-warning text-white">Apply</button>
                  </td>
                </tr>
                <tr>
                  <td>Accountant-Nib Bank</td>
                  <td>
                    <button class="btn btn-warning text-white">
                      see detail
                    </button>
                  </td>
                  <td>
                    <button class="btn btn-warning text-white">Apply</button>
                  </td>
                </tr>
                <tr>
                  <td>Accountant-Nib Bank</td>
                  <td>
                    <button class="btn btn-warning text-white">
                      see detail
                    </button>
                  </td>
                  <td>
                    <button class="btn btn-warning text-white">Apply</button>
                  </td>
                </tr>
                <tr>
                  <td>Accountant-Nib Bank</td>
                  <td>
                    <button class="btn btn-warning text-white">
                      see detail
                    </button>
                  </td>
                  <td>
                    <button class="btn btn-warning text-white">Apply</button>
                  </td>
                </tr>
                <tr>
                  <td>Accountant-Nib Bank</td>
                  <td>
                    <button class="btn btn-warning text-white">
                      see detail
                    </button>
                  </td>
                  <td>
                    <button class="btn btn-warning text-white">Apply</button>
                  </td>
                </tr>
                <tr>
                  <td>Accountant-Nib Bank</td>
                  <td>
                    <button class="btn btn-warning text-white">
                      see detail
                    </button>
                  </td>
                  <td>
                    <button class="btn btn-warning text-white">Apply</button>
                  </td>
                </tr>
                <tr>
                  <td>Accountant-Nib Bank</td>
                  <td>
                    <button class="btn btn-warning text-white">
                      see detail
                    </button>
                  </td>
                  <td>
                    <button class="btn btn-warning text-white">Apply</button>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>

          <div class="col-md-8">
            <table class="table table-striped">
              <thead class="thead-dark">
                <tr>
                  <th class="w-60">Job List</th>
                  <th class="w-20">Details</th>
                  <th class="w-20">Status</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>Accountant-Archibadem Hopital</td>
                  <td>
                    <button class="btn btn-warning">see detail</button>
                  </td>
                  <td>
                    <button class="btn btn-warning text-white">Accepted</button>
                  </td>
                </tr>
                <tr>
                  <td>Accountant-Archibadem Hopital</td>
                  <td>
                    <button class="btn btn-warning">see detail</button>
                  </td>
                  <td>
                    <button class="btn btn-warning text-white">Accepted</button>
                  </td>
                </tr>
                <tr>
                  <td>Accountant-Archibadem Hopital</td>
                  <td>
                    <button class="btn btn-warning">see detail</button>
                  </td>
                  <td>
                    <button class="btn btn-warning text-white">Accepted</button>
                  </td>
                </tr>
                <tr>
                  <td>Accountant-Archibadem Hopital</td>
                  <td>
                    <button class="btn btn-warning">see detail</button>
                  </td>
                  <td>
                    <button class="btn btn-warning text-white">Accepted</button>
                  </td>
                </tr>
                <tr>
                  <td>Accountant-Archibadem Hopital</td>
                  <td>
                    <button class="btn btn-warning">see detail</button>
                  </td>
                  <td>
                    <button class="btn btn-warning text-white">Accepted</button>
                  </td>
                </tr>
                <tr>
                  <td>Accountant-Archibadem Hopital</td>
                  <td>
                    <button class="btn btn-warning">see detail</button>
                  </td>
                  <td>
                    <button class="btn btn-warning text-white">Accepted</button>
                  </td>
                </tr>
                <tr>
                  <td>Accountant-Archibadem Hopital</td>
                  <td>
                    <button class="btn btn-warning">see detail</button>
                  </td>
                  <td>
                    <button class="btn btn-warning text-white">Accepted</button>
                  </td>
                </tr>
                <tr>
                  <td>Accountant-Archibadem Hopital</td>
                  <td>
                    <button class="btn btn-warning">see detail</button>
                  </td>
                  <td>
                    <button class="btn btn-warning text-white">Accepted</button>
                  </td>
                </tr>
                <tr>
                  <td>Accountant-Archibadem Hopital</td>
                  <td>
                    <button class="btn btn-warning">see detail</button>
                  </td>
                  <td>
                    <button class="btn btn-warning text-white">Accepted</button>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </section>

    <footer class="text-center text-lg-start bg-dark text-light">
      <div class="container">
        <section class="">
          <div class="container text-center text-md-start mt-5">
            <div class="row mt-3">
              <div class="col-md-3 col-lg-4 col-xl-3 mx-auto my-4 text-center">
                <img
                  class="footer__logo"
                  src="../image/jobzlogo.png"
                  alt="JobZ logo"
                />
                <q style="font-style: italic">
                  For everyone, we offer a recruitment solution. professional,
                  pragmatic, and forward-thinking.
                </q>
              </div>

              <div class="col-md-2 col-lg-2 col-xl-2 mx-auto my-4">
                <h6 class="text-uppercase fw-bold mb-4">Help</h6>
                <p>
                  <a href="about-us.html" class="text-reset">About Us</a>
                </p>
                <p>
                  <a href="contact-us.html" class="text-reset">Contact Us</a>
                </p>
                <p>
                  <a href="index.html#faqs" class="text-reset">FAQs</a>
                </p>
              </div>
              <div class="col-md-3 col-lg-2 col-xl-2 mx-auto my-4">
                <h6 class="text-uppercase fw-bold mb-4">My Account</h6>
                <p>
                  <a href="login.html" class="text-reset">Log in</a>
                </p>
                <p>
                  <a href="Sign-up.html" class="text-reset">Sign up</a>
                </p>
              </div>
              <div class="col-md-4 col-lg-3 col-xl-3 mx-auto mb-md-0 mb-4">
                <h6 class="text-uppercase fw-bold mb-4">Follow us on</h6>
                <a href="" class="me-4 text-reset">
                  <i class="fab fa-facebook-f"></i>
                </a>
                <a href="" class="me-4 text-reset">
                  <i class="fab fa-twitter"></i>
                </a>
                <a href="" class="me-4 text-reset">
                  <i class="fab fa-google"></i>
                </a>
                <a href="" class="me-4 text-reset">
                  <i class="fab fa-instagram"></i>
                </a>
                <a href="" class="me-4 text-reset">
                  <i class="fab fa-linkedin"></i>
                </a>
                <a href="" class="me-4 text-reset">
                  <i class="fab fa-github"></i>
                </a>
              </div>
            </div>
          </div>
        </section>
        <div
          class="text-center p-4"
          style="background-color: rgba(0, 0, 0, 0.05)"
        >
          © 2023 Copyright:
          <a class="text-reset fw-bold" href="index.html">JobZ</a>
        </div>
      </div>
    </footer>

    <script>
      let jobseekeriddd = new Object();
      const searchresults  = document.getElementById('searchresults');
      const searchresults2  = document.getElementById('searchresults2');
      const searchfield = document.getElementById('search');
      const searchbtn = document.getElementById('searchbtn');
      const nameofuser = document.getElementById('username');
      var array = [];
      console.log(array);
      const nameofuser2 = document.getElementById('username2');

      let email = localStorage.getItem("email");
      console.log(email)
      async function LoadTutorials() {
         data = await fetch("http://localhost:4000/job-seeker/getUser", {
                method: "POST",
                headers: {
                  "Content-Type": "application/json",
                },
                body: JSON.stringify({
                  email: email
                }),
              })
              a = await data.json()
              getjobsapplied()
              console.log(a)
              console.log(a.name)
              console.log(a._id)
              nameofuser.innerText = a.name
              nameofuser2.innerText = a.name
              console.log(a._id)
              data3 = await fetch("http://localhost:4000/job-seeker/getjobsappliedto", {
          method: "POST",
                headers: {
                  "Content-Type": "application/json",
                },
                body: JSON.stringify({
                  jobSeekerId: a._id
                }),

                

        })
        
        console.log(data3);

      }
      
       LoadTutorials() 
       console.log('identify');
       abebe =JSON.stringify(jobseekeriddd)
       abbebe2 = JSON.parse(abebe);
      console.log(jobseekeriddd._id)

       function showDetails(ele){
          let component = document.getElementById(ele)
          if (component.style.display == 'none'){
            component.style.display = "block"
          }
          else {
            component.style.display = "none"
          }
        }

        
       async function searchalgorithm(){
        searchresults2.innerHTML = '';
        if(searchbtn.value = "ON"){
        const searchfieldval = searchfield.value;
        console.log(searchfieldval)

        try{
          if(searchfieldval === "") {
            // searchresults.innerText = "please type job title to search";
            throw "please Fill the required information";
          }
          else{
            result = await  fetch("http://localhost:4000/job-seeker/search", {
              method: "POST",
              headers: {
                "Content-Type": "application/json",
              },
              body: JSON.stringify({
                title: searchfieldval
              }),
            }

            );
            result = await result.json();
            console.log(result[0].company);
           result.forEach(element => {
            // searchresults2.innerHTML += `
            // <div class = "col-md-7">${element.title}</br><small>${element.company}</small></div>
            // <div class = "col-md-5"><button onclick = 'showDetails("details${element.title}".split(" ").join(""))'  class = "btn btn-warning m-auto">See Details</button></br>
            //   <div id = "details${element.title}'.split(' ').join('')" class = "bg-light" style = "display: none;">
            //     by ${element.company}</br>
            //     job type: ${element.jobType}</br>
            //     location: ${element.location}</br>
            //     Available slots: ${element.numOfSlots}</br>
            //     deadline: ${element.deadline}</br>
            //     Salary: ${element.salary}</br>
            //     <button id = "btn5" class= "btn btn-warning">Apply now!</button>
            //     </div>
            //   </div>`
              const div = document.createElement("div");
              const h2 = document.createElement("h4");
              const h5 = document.createElement("h5");
              const button = document.createElement("button");
              h2.innerText = element.title
              h5.innerText = element.company
              button.innerText = "Sea Details";
              button.style.height = "2.5em"
              div.appendChild(h2);
              div.appendChild(h5);
              h5.style.fontSize = '5px';
              searchresults2.appendChild(div);
              searchresults.appendChild(button);
              button.style.borderRadius = '8px';
              searchresults.style.display= "flex";
              searchresults2.style.marginRight = "auto";
              button.style.marginRight = "1.5em";
              button.addEventListener('click', () => {
              
        const div2 = document.createElement("div");
        const h40 = document.createElement("h4");
        const h41 = document.createElement("h5");
        const h42 = document.createElement("h5");
        const h43 = document.createElement("h5");
        const h44 = document.createElement("h5");
        const h45 = document.createElement("h5");
        const h46 = document.createElement("h5");
        const btn5 = document.createElement('button');
        const successmessage = document.createElement('h5');
        console.log(array[0]);
        console.log(element)
        console.log(element.benefits)
        array.push(element.company)
        console.log(element._id);
       
        // h40.innerText = '';
        // h41.innerText = '';
        // h42.innerText ='';
        // h43.innerText='';
        // h44.innerText ='';
        // h45.innerText ='';
        // h46.innerText= '';
        // btn5.innerText = '';
        // div2.innerHTML = '';
        // successmessage.innerText ='';

        

        
        
        
        h40.innerText = element.title
        h41.innerText= `by ${element.company}`
        h42.innerText = `job type: ${element.jobType}`
        h43.innerText = `location: ${element.location}`
        h44.innerText = `Available slots: ${element.numOfSlots}`
        h45.innerText = `deadline: ${element.deadline}`
        h46.innerText = `Salary: ${element.salary}$`
        btn5.innerText ="Apply Now!"

        div2.appendChild(h40);
        div2.appendChild(h41);
        div2.appendChild(h42);
        div2.appendChild(h43);
        div2.appendChild(h44);
        div2.appendChild(h45);
        div2.appendChild(h46);
        div2.appendChild(btn5);
        div2.appendChild(successmessage);
        div2.style.backgroundColor = "white"; 
        div2.style.color = "purple"; 
        div2.style.borderRadius = "2em"      
        searchresults.appendChild(div2);
        div2.style.padding = "1.5em"
        btn5.style.borderRadius = "0.8em" 
        btn5.style.backgroundColor = "blue"
        btn5.style.color = "gold"
        btn5.style.marginLeft = "4em"
        btn5.style.padding = "0.5em"
        btn5.style.fontSize = "1.5em"

        // let btn5 = document.getElementById("btn5")
        btn5.addEventListener('click',async () => {
           
          data = await fetch("http://localhost:4000/job-seeker/getUser", {
                method: "POST",
                headers: {
                  "Content-Type": "application/json",
                },
                body: JSON.stringify({
                  email: email
                }),
              })
              a = await data.json()
              console.log(`this is the user:`)
              console.log(a);

         data2 = await fetch("http://localhost:4000/job-seeker/apply",{
          method: "POST",
                headers: {
                  "Content-Type": "application/json",
                },
                body: JSON.stringify({
                  email: email,
                  jobID: element._id,
                  status: element.benefits,
                  company: element.company,
                  title: element.title
                }),
              })

              successmessage.innerText = "You have applied successfully."
              successmessage.style.color = "green";
              
        

         })  


        })


        
      }
            
              
            // searchresults.append
            
    )} }
        
        catch(err) {
          console.log(err);
        }
        searchbtn.value = "OFF";
       } else {
        searchresults.display = 'none';
        searchbtn.value = "ON";

       }}
      // function abdulme() 
       searchbtn.addEventListener('click', searchalgorithm)
       console.log("this is jobseeker id");
              console.log(jobseekeriddd.id);
       async function getjobsapplied() {
       
       }
       
      </script> 

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
